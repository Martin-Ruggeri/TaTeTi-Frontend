{"ast":null,"code":"import axios from 'axios'; // VARIABLES\n\nconst URLBase = 'http://127.0.0.1:3000/user/'; // INTERFACES\n\n// GET USER\nasync function findUserByToken() {\n  try {\n    const res = (await axios.get(URLBase + 'whoami')).data;\n    axios.defaults.headers.common['authorization'] = localStorage.getItem('TOKEN_USER');\n    if (res.status === \"ERROR\") return Promise.reject(res.response.err); // Si hubo un error responde el error\n\n    return Promise.resolve(res.response.result);\n  } catch (error) {\n    return Promise.reject(error);\n  }\n} // POST USER\n\n\nasync function postUser(body) {\n  try {\n    const res = (await axios.post(URLBase, body)).data; // Crea el usuario en la API \n\n    if (res.status === \"ERROR\") return Promise.reject(res.response.err); // Si hubo un error responde el error\n\n    return Promise.resolve(res.response.result.token); // Devuelve el token del user creado\n  } catch (error) {\n    return Promise.reject(error);\n  }\n}\n\nexport { findUserByToken, postUser };","map":{"version":3,"sources":["/home/martin/Programas/React/tateti_v1.1/src/user/userApi.tsx"],"names":["axios","URLBase","findUserByToken","res","get","data","defaults","headers","common","localStorage","getItem","status","Promise","reject","response","err","resolve","result","error","postUser","body","post","token"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;;AACA,MAAMC,OAAO,GAAG,6BAAhB,C,CAGA;;AAWA;AACA,eAAeC,eAAf,GAAkD;AAC9C,MAAI;AACA,UAAMC,GAAG,GAAE,CAAC,MAAMH,KAAK,CAACI,GAAN,CAAUH,OAAO,GAAG,QAApB,CAAP,EAAsCI,IAAjD;AACAL,IAAAA,KAAK,CAACM,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiDC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAjD;AACA,QAAGP,GAAG,CAACQ,MAAJ,KAAe,OAAlB,EAA2B,OAAOC,OAAO,CAACC,MAAR,CAAeV,GAAG,CAACW,QAAJ,CAAaC,GAA5B,CAAP,CAH3B,CAGqE;;AAErE,WAAOH,OAAO,CAACI,OAAR,CAAgBb,GAAG,CAACW,QAAJ,CAAaG,MAA7B,CAAP;AACH,GAND,CAME,OAAOC,KAAP,EAAc;AACZ,WAAON,OAAO,CAACC,MAAR,CAAeK,KAAf,CAAP;AACH;AACJ,C,CAGD;;;AACA,eAAeC,QAAf,CAAwBC,IAAxB,EAAwD;AACpD,MAAI;AACA,UAAMjB,GAAG,GAAG,CAAC,MAAMH,KAAK,CAACqB,IAAN,CAAYpB,OAAZ,EAAoBmB,IAApB,CAAP,EAAkCf,IAA9C,CADA,CAC4D;;AAE5D,QAAGF,GAAG,CAACQ,MAAJ,KAAe,OAAlB,EAA2B,OAAOC,OAAO,CAACC,MAAR,CAAeV,GAAG,CAACW,QAAJ,CAAaC,GAA5B,CAAP,CAH3B,CAGqE;;AAErE,WAAOH,OAAO,CAACI,OAAR,CAAgBb,GAAG,CAACW,QAAJ,CAAaG,MAAb,CAAoBK,KAApC,CAAP,CALA,CAKsD;AAEzD,GAPD,CAOE,OAAOJ,KAAP,EAAc;AACZ,WAAON,OAAO,CAACC,MAAR,CAAeK,KAAf,CAAP;AACH;AACJ;;AAED,SAAShB,eAAT,EAA2BiB,QAA3B","sourcesContent":["import axios from 'axios';\n\n// VARIABLES\nconst URLBase = 'http://127.0.0.1:3000/user/';\n\n\n// INTERFACES\nexport interface IUser {\n    id: number,\n    name: string,\n}\n\ninterface IUpUser {\n    name: string,\n}\n\n\n// GET USER\nasync function findUserByToken(): Promise<IUser>  {\n    try {\n        const res= (await axios.get(URLBase + 'whoami')).data;\n        axios.defaults.headers.common['authorization'] = localStorage.getItem('TOKEN_USER');\n        if(res.status === \"ERROR\") return Promise.reject(res.response.err);  // Si hubo un error responde el error\n\n        return Promise.resolve(res.response.result as IUser);\n    } catch (error) {\n        return Promise.reject(error);\n    }\n}\n\n\n// POST USER\nasync function postUser(body: IUpUser): Promise<string> {\n    try {\n        const res = (await axios.post (URLBase,body)).data;         // Crea el usuario en la API \n        \n        if(res.status === \"ERROR\") return Promise.reject(res.response.err);  // Si hubo un error responde el error\n\n        return Promise.resolve(res.response.result.token);    // Devuelve el token del user creado\n\n    } catch (error) {\n        return Promise.reject(error);\n    } \n}\n\nexport { findUserByToken , postUser};"]},"metadata":{},"sourceType":"module"}